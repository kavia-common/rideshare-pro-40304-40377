{"is_source_file": true, "format": "JavaScript", "description": "This file defines in-memory data structures and functions for managing ride records in a rideshare backend. It includes functions to save, retrieve, list, and update rides, and contains ride-specific types and documentation.", "external_files": [], "external_methods": [], "published": ["saveRide", "getRideById", "listRidesByUser", "updateRideStatus", "_clearRides"], "classes": [], "methods": [{"name": "saveRide(ride)", "description": "Creates or updates a ride record, generating a new ID if necessary, and maintains indices by ride ID and user ID.", "scope": "", "scopeKind": ""}, {"name": "getRideById(id)", "description": "Retrieves a ride by its ID, returning null if not found.", "scope": "", "scopeKind": ""}, {"name": "listRidesByUser(userId, { limit = 50, offset = 0 } = {})", "description": "Lists rides for a specific user, supporting pagination.", "scope": "", "scopeKind": ""}, {"name": "updateRideStatus(id, status, extra = {})", "description": "Updates the status of an existing ride, with validation and optional extra fields.", "scope": "", "scopeKind": ""}, {"name": "_clearRides()", "description": "Internal helper to reset in-memory datastore, primarily for testing or bootstrap purposes.", "scope": "", "scopeKind": ""}], "calls": ["ridesById.set", "ridesByUser.get", "ridesByUser.set", "ridesById.get", "ridesById.set", "ridesById.get"], "search-terms": ["rides", "saveRide", "getRideById", "listRidesByUser", "updateRideStatus", "in-memory", "rideset", "ridesbyid", "ridesbyuser"], "state": 2, "file_id": 26, "knowledge_revision": 58, "git_revision": "", "ctags": [{"_type": "tag", "name": "_clearRides", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^export function _clearRides() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_rideAutoId", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^let _rideAutoId = 1000;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^        createdAt: now,$/", "language": "JavaScript", "kind": "property", "scope": "saveRide.rec", "scopeKind": "class"}, {"_type": "tag", "name": "driverId", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^        driverId: ride.driverId || null,$/", "language": "JavaScript", "kind": "property", "scope": "saveRide.rec", "scopeKind": "class"}, {"_type": "tag", "name": "dropoff", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^        dropoff: ride.dropoff || null,$/", "language": "JavaScript", "kind": "property", "scope": "saveRide.rec", "scopeKind": "class"}, {"_type": "tag", "name": "getRideById", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^export function getRideById(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^        id: ride.id,$/", "language": "JavaScript", "kind": "property", "scope": "saveRide.rec", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^      id,$/", "language": "JavaScript", "kind": "field", "scope": "saveRide.rec", "scopeKind": "class"}, {"_type": "tag", "name": "listRidesByUser", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^export function listRidesByUser(userId, { limit = 50, offset = 0 } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, { limit = 50, offset = 0 } = {})"}, {"_type": "tag", "name": "meta", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^        meta: ride.meta || {},$/", "language": "JavaScript", "kind": "property", "scope": "saveRide.rec", "scopeKind": "class"}, {"_type": "tag", "name": "pickup", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^        pickup: ride.pickup || null,$/", "language": "JavaScript", "kind": "property", "scope": "saveRide.rec", "scopeKind": "class"}, {"_type": "tag", "name": "price", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^        price: ride.price ?? null,$/", "language": "JavaScript", "kind": "property", "scope": "saveRide.rec", "scopeKind": "class"}, {"_type": "tag", "name": "rec", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^      const rec = {$/", "language": "JavaScript", "kind": "class", "scope": "saveRide", "scopeKind": "class"}, {"_type": "tag", "name": "ridesById", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^const ridesById = new Map();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "ridesByUser", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^const ridesByUser = new Map(); \\/\\/ Map<userId, rideIds[]>$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "saveRide", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^export function saveRide(ride) {$/", "language": "JavaScript", "kind": "function", "signature": "(ride)"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^        status: ride.status || 'requested',$/", "language": "JavaScript", "kind": "property", "scope": "saveRide.rec", "scopeKind": "class"}, {"_type": "tag", "name": "updateRideStatus", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^export function updateRideStatus(id, status, extra = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, status, extra = {})"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^        updatedAt: now,$/", "language": "JavaScript", "kind": "property", "scope": "saveRide.rec", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/rideshare-pro-40304-40377/ride_booking_backend/src/db/rides.js", "pattern": "/^        userId: ride.userId,$/", "language": "JavaScript", "kind": "property", "scope": "saveRide.rec", "scopeKind": "class"}], "hash": "9ebb82c36e9ee04195d407cf0f274b7e", "format-version": 4, "code-base-name": "ride_booking_frontend", "filename": "ride_booking_backend/src/db/rides.js", "fields": [{"name": "let _rideAutoId = 1000;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "createdAt: now,", "scope": "saveRide.rec", "scopeKind": "class", "description": "unavailable"}, {"name": "driverId: ride.driverId || null,", "scope": "saveRide.rec", "scopeKind": "class", "description": "unavailable"}, {"name": "dropoff: ride.dropoff || null,", "scope": "saveRide.rec", "scopeKind": "class", "description": "unavailable"}, {"name": "id: ride.id,", "scope": "saveRide.rec", "scopeKind": "class", "description": "unavailable"}, {"name": "id,", "scope": "saveRide.rec", "scopeKind": "class", "description": "unavailable"}, {"name": "meta: ride.meta || {},", "scope": "saveRide.rec", "scopeKind": "class", "description": "unavailable"}, {"name": "pickup: ride.pickup || null,", "scope": "saveRide.rec", "scopeKind": "class", "description": "unavailable"}, {"name": "price: ride.price ?? null,", "scope": "saveRide.rec", "scopeKind": "class", "description": "unavailable"}, {"name": "status: ride.status || 'requested',", "scope": "saveRide.rec", "scopeKind": "class", "description": "unavailable"}, {"name": "updatedAt: now,", "scope": "saveRide.rec", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: ride.userId,", "scope": "saveRide.rec", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"58": ""}]}